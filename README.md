# TransportСatalogue
Программная реализация системы маршрутизации, работающая с JSON запросами. Программа двухстадийная и имеет два варианта запросов, первый отвечает за создание базы данных, второй же выполняет всю нужную работу для того, чтобы выдать нужную информацию по любым оптимальным маршрутам, автобусам или остановкам. Формата вывода: .json и .svg.  

По запросу "make_base" из входного потока считывает маршруты автобусов, остановки и настройки отрисовки, обрабатывает эти данные и с помощью серилизации сохраняет состояние.  
По запросу "process_requests" из входного потока считывает требуемый запрос, и согласно нему в выходной поток выводит информацию:  
__для автобуса__
- длину маршрута автобуса
- колличество остановок
- колличество уникальных остановок
- извилистость маршрута. Она равна отношению длины дорожного расстояния маршрута к длине географического расстояния.  
 
__для остановки__
- автобусы проходящие через эту остановку  

__для маршрута__   
 _вывод информации повторяется для каждой остановки на которой нужно сесть/пересесть в автобус и для каждого требуемого автобуса
маршрут выбирается исходя из мимнимального времени в пути_ 
- название остановки начала маршрута
- время ожидания автобуса
- номер необходимого автобуса 
- колличество остановок необходимое проехать на этом автобусе до выхода 
- затрачивоемое время в движении на этом автобусе
- остановки для пересадок (если требуется) 

- общее время в пути  

__для карты__  
- строки с svg изображением

## Использование:
Программа должна запускаться с аргументом командной строки "make_base" или "process_requests".  
После запуска с аргументом командной строки "make_base" в стандортный поток ввода необходимо подать документ содержащий данные для создания справочника (пример запроса ниже).  
Чтобы ввести запрос программу необходимо запустить с аргументом командной строки "process_requests" и в стандортный поток ввода необходимо подать документ содержащий требуемые запросы после чего программа выведет данные согласно запросу (пример запроса ниже). 


## Сборка программы:
```
git clone git@github.com:Add-JDHero/cpp-transport-catalogue.git
cd cpp-transport-catalogue
mkdir build && cd build
cmake ..
cmake --build .

# Шаг 1.   Запуск первой части программы:
./transport_catalogue make_base  < ../json_input_files/input_make_base.txt > ../output.txt

# Шаг 2. Запуск второй части программы:
./transport_catalogue process_requests  < ../json_input_files/input_process_requests.txt > ../output.txt


# Итог: в папке build готово svg изображение дорожной карты "transport_catalogue.svg".
``` 
<img src="https://github.com/Add-JDHero/cpp-transport-catalogue/raw/main/pictures/transport_catalogue.svg" alt="Transport catalogue image" width="1300px" height="950px">

## Cистемные требования:
- С++17 (STL);
- GCC.

## Стек технологий:
- CMake 3.22.0;
- Protobuf-cpp 3.18.1.
